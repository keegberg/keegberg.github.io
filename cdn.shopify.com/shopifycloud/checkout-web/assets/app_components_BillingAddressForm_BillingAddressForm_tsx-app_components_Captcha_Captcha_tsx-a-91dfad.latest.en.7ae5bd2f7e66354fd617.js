"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([["app_components_BillingAddressForm_BillingAddressForm_tsx-app_components_Captcha_Captcha_tsx-a-91dfad"],{g1ay:(e,t,n)=>{n.d(t,{N:()=>d});var a=n("Cmfx"),i=n("HuVc");const r=(0,a.createContext)({});var o=n("WYdg"),s=n("tgOL"),c=n("WyhZ");function d({settings:e,additionalFieldGroups:t}){const n=(0,a.useContext)(r),d=(0,a.useMemo)((()=>n?.addressErrors||(0,i._W)()),[n?.addressErrors]),l=(0,o.fv)(),{billingAddress:h}=(0,s.gG)();return a.default.createElement(c.kS,{id:"billingAddressForm",addressType:"billing",addressErrors:d,address:h,countries:l,settings:e,additionalFieldGroups:t,addressSettings:n?.addressSettings})}},j6HV:(e,t,n)=>{n.d(t,{U:()=>_});var a=n("Cmfx");function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}var o,s,c="hcaptcha-api-script-id",d=new Promise((function(e,t){o=e,s=t}));const l=function(e){var t,n;function l(t){var n;(n=e.call(this,t)||this).renderCaptcha=n.renderCaptcha.bind(i(n)),n.resetCaptcha=n.resetCaptcha.bind(i(n)),n.removeCaptcha=n.removeCaptcha.bind(i(n)),n.isReady=n.isReady.bind(i(n)),n.loadCaptcha=n.loadCaptcha.bind(i(n)),n.handleOnLoad=n.handleOnLoad.bind(i(n)),n.handleSubmit=n.handleSubmit.bind(i(n)),n.handleExpire=n.handleExpire.bind(i(n)),n.handleError=n.handleError.bind(i(n)),n.handleOpen=n.handleOpen.bind(i(n)),n.handleClose=n.handleClose.bind(i(n)),n.handleChallengeExpired=n.handleChallengeExpired.bind(i(n));var r="undefined"!=typeof hcaptcha;return n.ref=a.createRef(),n.apiScriptRequested=!1,n.state={isApiReady:r,isRemoved:!1,elementId:t.id,captchaId:""},n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,r(t,n);var h=l.prototype;return h.componentDidMount=function(){this.state.isApiReady?this.renderCaptcha():this.loadCaptcha()},h.componentWillUnmount=function(){var e=this.state.captchaId;this.isReady()&&(hcaptcha.reset(e),hcaptcha.remove(e))},h.shouldComponentUpdate=function(e,t){return this.state.isApiReady===t.isApiReady&&this.state.isRemoved===t.isRemoved},h.componentDidUpdate=function(e){var t=this;["sitekey","size","theme","tabindex","languageOverride","endpoint"].every((function(n){return e[n]===t.props[n]}))||this.removeCaptcha((function(){t.renderCaptcha()}))},h.loadCaptcha=function(){if(!this.apiScriptRequested){var e=this.props,t=e.apihost,n=e.assethost,a=e.endpoint,i=e.host,r=e.imghost;(function(e){if(void 0===e&&(e={}),document.getElementById(c))return d;window.hcaptchaOnLoad=o;var t=e.apihost||"https://js.hcaptcha.com";delete e.apihost;var n=document.createElement("script");n.id=c,n.src=t+"/1/api.js?render=explicit&onload=hcaptchaOnLoad",n.async=!0,n.onerror=function(e){return s("script-error")};var a=function(e){return Object.entries(e).filter((function(e){e[0];var t=e[1];return t||!1===t})).map((function(e){var t=e[0],n=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(n)})).join("&")}(e);return n.src+=""!==a?"&"+a:"",document.head.appendChild(n),d})({apihost:t,assethost:n,endpoint:a,hl:e.languageOverride,host:i,imghost:r,recaptchacompat:!1===e.reCaptchaCompat?"off":null,reportapi:e.reportapi,sentry:e.sentry,custom:e.custom}).then(this.handleOnLoad).catch(this.handleError),this.apiScriptRequested=!0}},h.renderCaptcha=function(e){if(this.state.isApiReady){var t=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),n=hcaptcha.render(this.ref.current,t);this.setState({isRemoved:!1,captchaId:n},(function(){e&&e()}))}},h.resetCaptcha=function(){var e=this.state.captchaId;this.isReady()&&hcaptcha.reset(e)},h.removeCaptcha=function(e){var t=this.state.captchaId;this.isReady()&&this.setState({isRemoved:!0},(function(){hcaptcha.remove(t),e&&e()}))},h.handleOnLoad=function(){var e=this;this.setState({isApiReady:!0},(function(){e.renderCaptcha((function(){var t=e.props.onLoad;t&&t()}))}))},h.handleSubmit=function(e){var t=this.props.onVerify,n=this.state,a=n.isRemoved,i=n.captchaId;"undefined"==typeof hcaptcha||a||t(hcaptcha.getResponse(i),hcaptcha.getRespKey(i))},h.handleExpire=function(){var e=this.props.onExpire,t=this.state.captchaId;this.isReady()&&(hcaptcha.reset(t),e&&e())},h.handleError=function(e){var t=this.props.onError,n=this.state.captchaId;this.isReady()&&hcaptcha.reset(n),t&&t(e)},h.isReady=function(){var e=this.state,t=e.isApiReady,n=e.isRemoved;return t&&!n},h.handleOpen=function(){this.isReady()&&this.props.onOpen&&this.props.onOpen()},h.handleClose=function(){this.isReady()&&this.props.onClose&&this.props.onClose()},h.handleChallengeExpired=function(){this.isReady()&&this.props.onChalExpired&&this.props.onChalExpired()},h.execute=function(e){void 0===e&&(e=null);var t=this.state.captchaId;if(this.isReady())return e&&"object"!=typeof e&&(e=null),hcaptcha.execute(t,e)},h.setData=function(e){var t=this.state.captchaId;this.isReady()&&(e&&"object"!=typeof e&&(e=null),hcaptcha.setData(t,e))},h.getResponse=function(){return hcaptcha.getResponse(this.state.captchaId)},h.getRespKey=function(){return hcaptcha.getRespKey(this.state.captchaId)},h.render=function(){var e=this.state.elementId;return a.createElement("div",{ref:this.ref,id:e})},l}(a.Component);var h=n("SVER"),p=n("wrPE"),u=n("YABI"),f=n("+06o"),m=n("eU3S"),v=n("eoR2"),y=n("UMTP"),g=n("tgOL"),C=n("/GaP"),b=n("TGTV"),k=n("TSYQ"),E=n.n(k),R=n("rMDH"),O=n("xwCw"),x=n("sDyq");function _(){const e=(0,v.b)(),t=(0,y.q)(),{negotiate:n}=(0,b.JL)(),i=(0,g.gG)().captcha,[r,o]=(0,C.KO)(i),[s]=(0,a.useState)(Boolean(r?.token)),[c,d]=(0,a.useState)(r?.sitekey),k=(0,a.useRef)(null),_=(0,R.N4)(),[A,P]=(0,C.KO)(_),S=(0,x.g)(),{textField:{errorTypographyStyle:w}}=(0,h.G)(),I=t("captcha.errors.not_solved","Complete the CAPTCHA to continue");return(0,a.useEffect)((()=>{r?r?.sitekey&&d(r.sitekey):d(void 0);const e="error"===S.type?S.violations.map((e=>e.code)):[];r&&r.violationCode&&e.includes(r.violationCode)?(k?.current?.resetCaptcha(),P(I)):P(void 0)}),[r,P,I,S]),(0,R.qQ)(i,_,(e=>{if(e)return e.token?void 0:I}),O.VO.InvalidCaptcha),r&&"hcaptcha"===r.provider?s&&!r.sitekey?null:c?a.default.createElement(p.$,{accessibilityLabel:t("captcha.title","Complete the CAPTCHA to continue")},a.default.createElement(u.E,{spacing:"small400"},a.default.createElement("div",{className:A&&E()("zvYuA")},a.default.createElement(l,{sitekey:c,onVerify:e=>{r&&(o({...r,token:e,violationCode:void 0}),n(void 0,{progression:!1,include:["captcha"],skipStateUpdates:!0}))},languageOverride:e,ref:k})),A&&a.default.createElement("span",{className:E()(w&&f.Z[w])},a.default.createElement(m.b,null,A)))):null:null}},"7LqF":(e,t,n)=>{n.d(t,{OZ:()=>l,kr:()=>d,ub:()=>c});var a=n("Cmfx"),i=n("xlkJ"),r=n("YABI"),o=n("DQWH"),s=n("g89B");function c({children:e}){const t=(0,s.vQ)(),n=t?"large100":"large500",o=t?void 0:"base",c=t?"subdued":void 0;return a.default.createElement(i.G,{background:c,border:o,cornerRadius:"base",padding:["large100",n]},a.default.createElement(r.E,{spacing:"small200",inlineAlignment:t?void 0:"center"},e))}function d({children:e}){return a.default.createElement(i.G,{maxInlineSize:64,maxBlockSize:64,blockAlignment:"center",inlineAlignment:"center"},e)}function l({children:e}){const t=(0,s.vQ)();return a.default.createElement(o.a,{appearance:t?"subdued":void 0,inlineAlignment:t?void 0:"center"},e)}},"4Q8O":(e,t,n)=>{n.d(t,{x:()=>c});var a=n("Cmfx"),i=n("B8Vp"),r=n("4zcb"),o=n("G1hX");const s=(0,i.L)({load:async()=>(await(0,o.R)((()=>n.e("PayPalExpressCheckout").then(n.bind(n,"ePIo"))))).PayPalExpressButton,id:()=>"ePIo"});function c(e){const t="venmo"===e.fundingSource?"Venmo":"PayPal";return a.default.createElement(r.X,{id:t},a.default.createElement(s,e))}},"5geH":(e,t,n)=>{n.d(t,{D:()=>o});var a=n("UMTP"),i=n("4aMl"),r=n("n3o9");function o({hasError:e,children:t}){const n=(0,r.L)(),o=(0,a.q)(),s=e?`${o("general.error_page_title","Error")} - `:"",c=n?o("general.full_title",{pageTitle:`${s}${t}`,shopName:n.name},"{{pageTitle}} - {{shopName}} - Checkout"):o("general.loading_title","Checkout - {{shopName}}");return(0,i.Z)(c),null}},rQ6v:(e,t,n)=>{n.d(t,{DO:()=>f,el:()=>u,kK:()=>p});var a=n("Cmfx"),i=n("bCBN"),r=n("UOMH"),o=n("7dFW"),s=n("EM7i"),c=n("NyV5"),d=n("/GaP"),l=n("tgOL"),h=n("KjNL");function p(){const{value:e}=(0,o.j2)(),t=(0,s.$3)(e),n=(0,s.ji)(e),[,i]=(0,d.KO)((0,l.gG)().billingAddressOption);(0,a.useEffect)((()=>{(t||n)&&i("custom")}),[t,n,i])}function u(){const{shippingRequired:e}=(0,c.Ry)(),{value:t}=(0,o.j2)(),n=(0,s.$3)(t),a=(0,s.ji)(t),{isOrderEditCheckout:i}=(0,h.v)(),d=(0,r.a4)();return n||a||!i&&!e||i&&!d?"form":"selector"}function f(){const{billingAddress:e}=(0,l.gG)(),[t,n]=(0,d.KO)(e),r=(0,a.useCallback)((()=>{n((0,i.A4)(void 0,t.countryCode,t.zoneCode))}),[t,n]);return{billingAddress:t,clearBillingAddress:r}}},Y4jc:(e,t,n)=>{n.d(t,{c:()=>i});var a=n("7dFW");function i(){const{value:e}=(0,a.my)();return Boolean(e)}},caz8:(e,t,n)=>{n.d(t,{kg:()=>d,qx:()=>c});var a=n("/GaP"),i=n("Cmfx"),r=n("tko0");const o=(0,r.Q)("IdentityContext");function s(){const e=(0,r.a)(o);return(0,a.KO)(e.identitySourceAtom)}function c(e){const t=(0,i.useContext)(o),n=(0,a.xP)();if(t)return()=>{n.write(t.identitySourceAtom,e)}}function d(e){const[t]=s();return t&&t in e?e[t]:null}},"4zcb":(e,t,n)=>{n.d(t,{X:()=>c});var a=n("/GaP"),i=n("Cmfx"),r=n("tko0"),o=n("2foL"),s=n("5zc1");function c({id:e,children:t}){const n=(0,a.YC)(!1);return i.default.createElement(o.yP.Provider,{value:(0,i.useMemo)((()=>({id:e,completeStatusAtom:n})),[e,n])},t,i.default.createElement(d,null))}function d(){const e=(0,r.a)(o.yP),t=(0,a.Dv)(e.completeStatusAtom);return(0,s.cf)(e.id,!t),null}},Qadk:(e,t,n)=>{n.d(t,{xU:()=>p});var a=n("ioWx"),i=n("kZd3"),r=n("WpAa"),o=n("en30"),s=n("cHr0"),c=n("oLza"),d=n("ocOU");class l extends Error{constructor(...e){super(...e),this.name="AmazonShimSourceType"}}class h extends Error{constructor(...e){super(...e),this.name="AmazonShimClassicCheckout"}}async function p({logger:e,checkoutSessionIdentifier:t,sourceType:n,shopId:a,shopCurrency:h,buyerCurrency:p,countryCode:m,merchandiseLines:v,hasSellingPlan:y}){const g=(0,o.U2)(s.Q.SourceToken),C=p||h;try{let e;switch(n){case r.P.DraftOrder:e=`${window.location.origin}/${(0,c.Bp)(a)}/invoices/${g}`;break;case r.P.Checkout:e=`${window.location.origin}/${(0,c.Bp)(a)}/checkouts/${g}`;break;case r.P.BuyItNow:case r.P.CartApi:e=await async function(e){return u(e)}({wallet_name:i.F.AmazonPayClassic,checkout_session_identifier:t,country:m,has_selling_plans:y,is_upstream_button:!1,line_items:f(v),page_type:"product",presentment_currency:C,secret:!0});break;case r.P.Cart:case r.P.AbandonedCart:case r.P.Other:case r.P.Simulated:e=await u({wallet_name:i.F.AmazonPayClassic,cart_token:g,checkout_session_identifier:t});break;default:throw new l(`Unsupported source type ${n}`)}const o=new URL(e);o.searchParams.set("checkout[instrument_id]","AmazonPay"),o.searchParams.set("ensure_wallet","1"),window.location.replace(o)}catch(b){e.notify(b,{errorClass:d._j.Shim,severity:"error",metaData:{source:{type:n},checkout:{sourceToken:g}}})}}async function u(e){const t={headers:{Authorization:`Basic ${(0,a.bm)("shopify-checkout-api-token")}`,Accept:"application/json","Content-Type":"application/json","X-Shopify-Wallets-Caller":"reverse-shim"},mode:"cors",credentials:"same-origin",method:"POST",body:JSON.stringify({checkout:e,force_checkout_version:"0"})},n=await fetch(`${window.location.origin}/wallets/checkouts.json`,t),i=await n.json();if(n.ok)return i.checkout.web_url;throw new h(`Failed to create checkout, details: ${JSON.stringify(i)}`)}function f(e){return e.lines.map((({variantId:e,quantity:t,sellingPlan:n,properties:a})=>({variant_id:(0,c.Bp)(e),quantity:t,selling_plan_id:n?.id,properties:m(a)})))}function m(e){if(e&&0!==e.length)return e.reduce(((e,{name:t,value:n})=>({...e,[t]:n})),{})}}}]);